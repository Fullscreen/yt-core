---
title:  "Installing Yt"
h2: "Installing Yt"
---

<p>Add Yt to any bundled Ruby project by adding the line <code>gem 'yt', '~> {{ page.version }}'</code> to its Gemfile.</p>
<p>You can also install Yt in your system by opening the Terminal and typing <code>gem install yt</code>.</p>
<p>If you need to update version, type <code>gem update yt</code>, or run <code>bundle update</code> if inside a Ruby project.</p>

<hr />
<h4>Configuring your app</h4>

<p>
  In order to use the gem, you must register your app in the Google Developers Console.
</p>

<dl>
  <dt>Create a project</dt>
  <dd>
    Browse to the <a href="https://console.developers.google.com">Google Developers Console</a> and select “Create Project”:
    <img src="{{ site.baseurl }}/images/console-01.png" width="600" height="420" style="display: block" />
    From the menu select “API Manager”, then “Credentials”:
    <img src="{{ site.baseurl }}/images/console-02.png" width="600" height="420" style="display: block" />
  </dd>
  <dt><a class="anchor" id="api_key"></a>Generate an API key</dt>
  <dd>
    If you are building an app that only retrieves public data from YouTube, all you need is an API key:
    <img src="{{ site.baseurl }}/images/console-03.png" width="600" height="420" style="display: block" />
    Once you have generated an API key, you can use it to configure your app:
    <img src="{{ site.baseurl }}/images/console-04.png" width="600" height="420" style="display: block" />
    {% highlight ruby %}
# run this block before using any method of the gem (replace with your key)
Yt.configure do |config|
  config.api_key = 'AIzaSyAkHdn_oBEjZIEBlpMiGZP-3Y05NXtrzqY'
end{% endhighlight %}
  </dd>
  <dt><a class="anchor" id="oauth_client"></a>Generate an OAuth client</dt>
  <dd>
    If you are building a web app that acts on behalf of YouTube accounts, then you need an OAuth client:
    <img src="{{ site.baseurl }}/images/console-05.png" width="600" height="420" style="display: block" />
    Once you have generated a client ID and secret, you can use them to configure your app:
    <img src="{{ site.baseurl }}/images/console-07.png" width="600" height="420" style="display: block" />
    {% highlight ruby %}
# run this block before using any method of the gem (replace with your key)
Yt.configure do |config|
  config.client_id = '559890623820-a482mnits83t23.apps.googleusercontent.com'
  config.client_secret = 'nrbHq-dIUby_RuxoD6HrKJJv'
end{% endhighlight %}
    Also specify where to redirect users after they authorize your web app to use YouTube on their behalf:
    <img src="{{ site.baseurl }}/images/console-06.png" width="600" height="420" style="display: block" />
  </dd>
  <dt><a class="anchor" id="refresh_token"></a>Obtain an OAuth refresh token</dt>
  <dd>
    <p>
    The final step to use YouTube on behalf of a user is to ask that user to authorize your app.
    </p>
    <p>
    First, decide which <strong>scopes</strong> you need access to. Combine any of these:
    </p>
    <ul>
      <li><code>'youtube'</code> for full access to the account’s data</li>
      <li><code>'youtubepartner'</code> for full access to the account’s content owners</li>
      <li><code>'youtube.readonly'</code> for read-only access to the account’s data</li>
      <li><code>'yt-analytics.readonly'</code> for read-only access to the account’s analytics</li>
      <li><code>'yt-analytics-monetary.readonly'</code> for read-only access to the account’s earnings</li>
      <li><code>'userinfo.email'</code> for read-only access to the account’s email</li>
      <li><code>'userinfo.profile'</code> for read-only access to the account’s profile</li>
    </ul>
    <!--p>
    For instance, you can set <code>scopes = ['youtube', 'yt-analytics.readonly']</code>.
    </p-->
    <p>
      Then, create an instance of <code>Yt::Authentication</code> with the scopes and the redirect URI specified above:</p><pre>
{% include doc.html instance="Authentication#initialize" %}{% include example.html object='auth = Yt::Authentication' method='new' params=' <span class="ss">redirect_uri:</span> redirect_uri<span class="p">,</span> <span class="ss">scopes:</span> scopes' %}</pre>
    <p>
      Next, ask users to click on a link to authorize your app. The URL for the link can be obtained with:</p><pre>
{% include doc.html instance="Authentication#url" %}{% include example.html object='auth' method='url' result='"https://accounts.google.com/o/oauth2/auth?access_type=..."' %}</pre>
    <p>
      Once the users authorize your app, they will be redirected to the URI you specified.<br />
      The extra query parameter <code>?code=...</code> at the end of the URI is what you need to obtain the refresh token:</p><pre>
{% include doc.html instance="Authentication#initialize" %}{% include example.html object='auth = Yt::Authentication' method='new' params=' <span class="ss">redirect_uri:</span> redirect_uri<span class="p">,</span> <span class="ss">code:</span> code' %}
{% include doc.html instance="Authentication#tokens" %}{% include example.html object='auth' method='tokens' result='{access_token: "ya29.CjS...", refresh_token: "1/Flk6..."}' %}</pre>
    <p>
      You can now perform actions on YouTube on behalf of the authorized account, for instance:</p>
      {% highlight ruby %}
account = Yt::Account.new refresh_token: "1/Flk6..."
account.email # => "user@example.com"
account.videos # => #<Yt::Relation [#<Yt::Video @id=gkn...>, #<Yt::Video @id=oO6...>]>{% endhighlight %}
  </dd>
</dl>
